# カテゴリー不明問題
## Question #1
アプリケーション実行の為、DevOpsエンジニアがPublicSubnet内のパブリックIPアドレスを持つEC2 インスタンスを起動します。ユーザーデータスクリプトは、アプリケーションアーティファクトを取得し、起動時にインスタンスにインストールします。  
**アプリケーションのセキュリティ分類を変更すると、インスタンスはインターネットにアクセスせずに実行する必要があります。**
インスタンスが正常に起動しますが、アプリケーションはインストールされていないようです。新しいルールに準拠しながら、アプリケーションを正常にインストールする必要があるのは、次のうちどれですか。

* A. Elastic IP アドレスがアタッチされたパブリックサブネットでインスタンスを起動します。アプリケーションをインストールして実行したら、スクリプトを実行して Elastic IP アドレスの関連付けを解除します。
* B. NAT ゲートウェイをセットアップします。EC2 インスタンスをプライベートサブネットにデプロイします。プライベートサブネットのルートテーブルを更新して、NAT ゲートウェイをデフォルトルートとして使用します。
* C. アプリケーションアーティファクトを Amazon S3 バケットにパブリッシュし、S3 の VPC エンドポイントを作成します。S3 バケットからアプリケーションアーティファクトを読み取ることができるように、IAM インスタンスプロファイルを EC2 インスタンスに割り当てます。
* D. アプリケーション インスタンスのセキュリティ グループを作成し、アーティファクト リポジトリへの送信トラフィックのみをホワイトリストに登録します。インストールが完了したら、セキュリティ グループの規則を削除します。

【考え方】  
Bは、次のように:アプリケーションのセキュリティ分類の変更は、現在、インターネットへのアクセスなしでインスタンスを実行する必要があります。
VPC のプライベートサブネットで実行されている EC2 インスタンスは、VPC と同じリージョンにある S3 バケット、オブジェクト、および API 関数への制御アクセスを持つことができるようになりました。S3 バケットポリシーを使用して、どの VPC エンドポイントが S3 バケットにアクセスできるかを示すことができます。  

【答え】　C  

---

## Question #2（パッチマネージメントの問題）
IT 部門は、オンプレミスと AWS の両方で Windows サーバーと Linux (アマゾンおよびレッドハット エンタープライズ Linux) サーバーを使用してポートフォリオを管理しています。監査の結果、OS およびコア アプリケーションの**更新プログラムを適用するプロセスが存在しない**こと、および**サーバーのパッチ レベルに一貫性がない**ことが明らかになります。
最新の OS およびコア アプリケーションの更新プログラム レベルですべてのサーバーを更新および保守するための、最も信頼性の高い一貫性のあるメカニズムを提供する方法は、次のうちどれですか。

* A. すべてのオンプレミスおよび AWS サーバーに AWS システムマネージャーエージェントをインストールします。システム マネージャ リソース グループを作成します。メンテナンス期間中にスケジュールされたパッチ更新を実行するには、Systems Manager パッチマネージャを事前に構成されたパッチベースラインと共に使用します。
* B. すべてのオンプレミスおよび AWS サーバーに AWS OpsWorks エージェントをインストールします。オペレーティングシステムごとに別々のレイヤーを持つ OpsWorks スタックを作成し、Chef スーパーマーケットからレシピを取得して、メンテナンスウィンドウ中に各レイヤーのパッチコマンドを実行します。
* C. シェルスクリプトを使用して、yumを使用して Linux サーバに最新の OS パッチをインストールし、cron を使用して自動的に実行するようにスケジュールします。Windows の更新プログラムを使用して、Windows サーバーに自動的に修正プログラムを適用します。
* D. AWS システムマネージャーのパラメーターストアを使用して、Linux および Windows サーバーごとに認証情報を安全に保存します。システム マネージャ リソース グループを作成します。システム マネージャーの実行コマンドを使用して、システム マネージャーのパラメーター ストアで資格情報を使用して、更新プログラムをリモートで展開します。

【考え方】  
1- https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-patch-patchgroups.html

2- https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-patch.html

【答え】A  

---

## Question #3
ある企業が AWS で集中ログソリューションを設定しており、いくつかの要件があります。
同社は、Amazon CloudWatch ログと VPC フローログが異なるサブアカウントから取得され、単一の監査アカウントに配信されることを望んでいます。ただし、**サブアカウントの数は変化し続けています**。また、**監査アカウントのログをインデックス化**して、実行可能な洞察を収集する必要もあります。DevOps エンジニアは、会社のすべての要件を満たすソリューションをどのように実装する必要がありますか。

* A. AWS Lambda を使用して、監査アカウントの Amazon ES にログを書き込みます。Amazon CloudWatch サブスクリプションフィルターを作成し、サブアカウントで Kinesis Data Streamsを使用して、監査アカウントにデプロイされた Lambda 関数にログをストリーミングします。
* B. Kinesis Data Streamsを使用して、監査アカウントで Amazon ES にログを書き込みます。CloudWatch サブスクリプションフィルターを作成し、サブアカウントの Kinesis Data Streamsを使用して、監査アカウントの Kinesis Data Streamsにログをストリーミングします。
* C. Kinesis Data Streamsを使用して、監査アカウントで Amazon ES にログを書き込みます。CloudWatch サブスクリプションフィルターを作成し、監査アカウントのサブアカウントから Kinesis Data Streamsにログをストリーミングします。
* D. AWS Lambda を使用して、監査アカウントの Amazon ES にログを書き込みます。CloudWatch サブスクリプションフィルターを作成し、サブアカウントで Lambda を使用して、監査アカウントにデプロイされた Lambda 関数にログをストリーミングします。

【考え方】  
A – 間違っています, 我々は、マルチプルKストリームを必要としません.
キネシスストリームは、ESに書き込むためにラムダ関数を必要とするので、Bは間違っています
C 正しい: キネシスデータファイアホースは、配信先として Amazon ES をサポートしています。監査アカウントの 1 つの Kinesis ストリームのサブアカウントに CW サブスクリプションフィルターを作成できます。Kinesis ストリームは現在、クロスアカウント サブスクリプションの宛先としてサポートされている唯一のリソースです。監査アカウントでは、ログデータを Kinesis ストリームからデータ Firehose にロードし、最後に ES にロードできます。
Dはアカウントを変更する方が難しいと思います
Ref: https://aws.amazon.com/pt/blogs/architecture/central-logging-in-multi-account-environments/
https://www.slideshare.net/akuwano/aws-77583244

【答え】C

---

## Question #3(AWS OpsWorks スタックの知識を問う問題)

ある企業は、AWS の上にある独自のエンタープライズインメモリデータストアにグリッドシステムを使用したいと考えています。このシステムは、Linuxベースのディストリビューションの複数のサーバーノードで実行できます。**ノードが追加または削除されるたびに、システムはクラスタ全体を再構成できる必要があります**。**ノードを追加または削除する場合は、/etc./cluster/nodes.config ファイルを更新する必要があります。**
同社は、新しいノードをクラスタに追加するタスクを自動化したいと考えています。
DevOpsエンジニアはこれらの要件を満たすために何ができますか?

* A. AWS OpsWorks スタックを使用して、そのクラスターのサーバーノードを階層化します。/etc/cluster/nodes.config ファイルの内容を設定し、レイヤーの現在のメンバーを使用してサービスを再開する Chef レシピを作成します。そのレシピをライフサイクルの構成イベントに割り当てます。
* B. ファイル nodes.config をバージョン管理に配置します。クラスターノードの Amazon EC2 タグ値に基づいて AWS CodeDeploy デプロイ設定とデプロイグループを作成します。新しいノードをクラスターに追加する場合は、タグ付けされたすべてのインスタンスでファイルを更新し、バージョン管理でコミットを行います。新しいファイルを展開し、サービスを再起動します。
* C. Amazon S3 バケットを作成し、etc/cluster/nodes.config ファイルのバージョンをアップロードします。その S3 ファイルをポーリングして頻繁にダウンロードする crontab スクリプトを作成します。Monit や systemd などのプロセス マネージャを使用して、新しいファイルが変更されたことを検出したときにクラスタ サービスを再起動します。ノードをクラスターに追加する場合は、ファイルの最新のメンバーを編集します。新しいファイルを S3 バケットにアップロードします。
* D. クラスターの現在のセキュリティ グループのすべてのメンバーを一覧表示するユーザー データ スクリプトを作成し、新しいインスタンスがクラスターに追加されるたびに /etc/cluster/nodes.config ファイルを自動的に更新します。

【考え方】  
https://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-events.html

【答え】A

---

## Question #5

ある企業は、AWS で実行されているインフラストラクチャリソースのタグ付けと設定の標準を確立しています。DevOps エンジニアは、違反を強調する機能を備えた、コンプライアンス態勢のほぼ**リアルタイムのダッシュボード**を提供する設計を開発しています。
どのアプローチが規定の要件を満たしていますか?

* A. AWS Service Catalogでリソース設定を定義し、Amazon CloudWatch で AWS サービスカタログのコンプライアンスと違反を監視します。次に、ライブ CloudWatch ダッシュボードを設定して共有します。Amazon SNS 通知に違反と修正を設定します。
* B. AWS Config を使用して設定の変更を記録し、データを Amazon S3 バケットに出力します。データセットの Amazon QuickSight 分析を作成し、ダッシュボードとモバイルデバイスの情報を使用します。
* C. 指定したタグとタグのないリソースを表示するリソース グループを作成します。AWS マネジメントコンソール を使用して、準拠および非準拠のリソースを表示します。
* D. コンプライアンスとタグ付けの要件を Amazon インスペクターで定義します。結果を Amazon CloudWatch Logsに出力します。メトリクスフィルターを構築して、関心のある監視対象の要素を分離し、CloudWatch ダッシュボードにデータを表示します。

【考え方】  
AWS Config は、非準拠のリソースをすばやく見つけて適切なアクションを実行するのに役立つビジュアルダッシュボードを提供します。IT 管理者、セキュリティ専門家、コンプライアンス担当者は、AWS リソースのコンプライアンス体制の共有ビューを表示できます。
https://aws.amazon.com/about-aws/whats-new/2019/03/aws-config-now-supports-tagging-of-aws-config-resources/

【答え】B

---

## Question #6

運用アカウントには、手動でログインした Amazon EC2 インスタンスを 24 時間以内に終了する必要があるという要件があります。
本番アカウントのすべてのアプリケーションは、Amazon CloudWatch Logs エージェントが設定された Auto Scaling グループを使用しています。このプロセスはどのように自動化できますか?

* A. AWS StepFunctionアプリケーションへの CloudWatch ログサブスクリプションを作成します。ログインイベントを生成した EC2 インスタンスにタグを追加し、インスタンスを使用停止にするマークを付ける関数を設定します。次に、CloudWatch イベントルールを作成して、このタグを使用してすべてのインスタンスを終了する 2 番目の AWS Lambda 関数を 1 日 1 回トリガーします。
* B. ログインイベントでトリガーされる CloudWatch アラームを作成します。オペレーションチームがサブスクライブしている Amazon SNS トピックに通知を送信し、24 時間以内に EC2 インスタンスを終了させます。
* C. ログインイベントでトリガーされる CloudWatch アラームを作成します。Amazon SQS キューに送信するアラームを設定します。ワーカーインスタンスのグループを使用してキューからのメッセージを処理し、Amazon CloudWatch イベントルールをトリガーするようにスケジュールします。
* D. AWS Lambda 関数でクラウドウォッチログのサブスクリプションを作成します。ログインイベントを生成した EC2 インスタンスにタグを追加し、インスタンスを使用停止にするマークを付ける関数を設定します。このタグを持つすべてのインスタンスを終了する毎日の Lambda 関数をトリガーする CloudWatch イベントルールを作成します。

